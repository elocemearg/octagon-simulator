<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Octagon Simulator</title>
        <meta charset="UTF-8">
        <meta name="author" content="Graeme Cole">
        <meta name="description" content="On-screen countdown clock mockup">
        <link rel="stylesheet" type="text/css" href="interface.css?bump=1" />

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Boogaloo&family=Inter&family=Nova+Mono&family=Press+Start+2P&family=Questrial&display=swap" rel="stylesheet">

        <link rel="icon" type="image/png" href="icons/octagonfavicon128.png" sizes="128x128">
        <link rel="icon" type="image/png" href="icons/octagonfavicon64.png" sizes="64x64">
        <link rel="icon" type="image/x-icon" href="icons/octagonfavicon32.ico">
    </head>
    <body onload="initialise();">
        <script src="font.js?bump=1"></script>
        <script src="draw.js?bump=2"></script>
        <script src="htmldraw.js?bump=2"></script>
        <script src="clock.js?bump=2"></script>
        <script src="presets.js?bump=1"></script>
        <script src="interface.js?bump=3"></script>

        <div id="screen">
            <canvas id="canvas"></canvas>
        </div>

        <div class="menu" id="menu">
            <div id="errors"></div>
            <div class="menusection">
                <div class="sectiontitle">Presets</div>
                <div class="presetsheader">
                    <a onclick="togglePresetsHeader();" id="togglepresetslink" class="expandlink">Hide presets</a>
                </div>
                <div class="presetspanelcontainer" id="presetspanelcontainer">
                    <div class="presetspanel" id="presetspanel"></div>
                </div>
            </div>
            <div class="menuinstructions">
                <div class="sectiontitle">Keyboard shortcuts</div>
                <table class="menuinstructions" id="clockinstructions">
                    <tr>
                        <td>Esc, M</td><td>Show/hide this menu</td>
                    </tr>
                    <tr>
                        <td>S</td><td>Stop/start clock</td>
                    </tr>
                    <tr>
                        <td>R</td><td>Reset clock</td>
                    </tr>
                    <tr>
                        <td>D</td><td>Display on/off</td>
                    </tr>
                </table>
                <table class="menuinstructions" id="counterinstructions" style="display: none;">
                    <tr>
                        <td>Esc, M</td><td>Show/hide this menu</td>
                    </tr>
                    <tr>
                        <td>+/&minus;</td><td>Increment/decrement</td>
                    </tr>
                    <tr>
                        <td>R</td><td>Reset to zero</td>
                    </tr>
                    <tr>
                        <td>D</td><td>Display on/off</td>
                    </tr>
                </table>
                <table class="menuinstructions" id="rtcinstructions" style="display: none;">
                    <tr>
                        <td>Esc, M</td><td>Show/hide this menu</td>
                    </tr>
                    <tr>
                        <td>S</td><td>&ndash;</td>
                    </tr>
                    <tr>
                        <td>R</td><td>&ndash;</td>
                    </tr>
                    <tr>
                        <td>D</td><td>Display on/off</td>
                    </tr>
                </table>
            </div>

            <div class="menusection">
                <div class="sectiontitle">Mode</div>
                <div class="sectionbody">
                    <div class="menurow radiorow" style="margin-bottom: 10px;">
                        <input type="radio" id="clockmode" name="countermode" value="0" onclick="changeMode();" checked /><label for="clockmode">Clock</label>
                        <input type="radio" id="countermode" name="countermode" value="1" onclick="changeMode();" style="margin-left: 20px;" /><label for="countermode">Counter</label>
                        <input type="radio" id="rtcmode" name="countermode" value="2" onclick="changeMode();" style="margin-left: 20px;" /><label for="rtcmode">Real time clock</label>
                    </div>
                </div>
            </div>

            <div class="menusection">
                <div class="sectiontitle clockmodecontrols">Start time</div>
                <div class="sectiontitle countermodecontrols">Counter</div>
                <div class="sectionbody">
                    <div class="clockmodecontrols">
                        <div class="menurow">
                            <input type="number" id="minutes" min="0" value="0" oninput="startTimeChanged();" /> min
                            <input type="number" id="seconds" min="0" value="0" oninput="startTimeChanged();" style="margin-left: 1em;" /> sec
                            <input type="checkbox" id="countup" name="countup" onclick="optionsChanged();" style="margin-left: 1em;" /><label for="countup">Count up</label>
                        </div>
                        <div class="menurow">
                            <button class="clockcontrolbutton" id="start" style="background-color: #ddffdd;" onclick="startStop();">&#x25B6; Start</button>
                            <button class="clockcontrolbutton" id="reset" onclick="resetClock();" disabled>&#x21BA; Reset</button>
                        </div>
                    </div>
                    <div class="countermodecontrols">
                        <div class="menurow">
                            <label for="count">Count </label><input type="number" id="count" name="count" value="0" oninput="countChanged();" />
                        </div>
                        <div class="menurow">
                            <button class="countercontrolbutton" id="counterup" style="background-color: #ddffdd;" onclick="adjustCounter(1);">+</button>
                            <button class="countercontrolbutton" id="counterdown" style="background-color: #ffdddd;" onclick="adjustCounter(-1);">&minus;</button>
                            <button class="countercontrolbutton" id="resetcounter" onclick="resetCounter();" >0</button>
                        </div>
                    </div>
                    <div class="rtcmodecontrols">
                        <div class="menurow">
                        </div>
                    </div>
                </div>
            </div>
            <div class="menusection">
                <div class="sectiontitle sectiontitleclickable" onclick="toggleOptionsSection('position');">
                    <div class="sectiondropdown" id="positiondropdown">&#x25B6;</div>
                    Size &amp; position
                </div>
                <div class="sectionbody" id="positionsection">
                    <div class="menurow">
                        <select id="xposanchor" name="xposanchor" onchange="positionChanged();">
                            <option value="left">Left edge</option>
                            <option value="right" selected>Right edge</option>
                        </select>
                        <input type="number" id="xpospc" oninput="positionChanged();" />% from left of window
                    </div>
                    <div class="menurow">
                        <select id="yposanchor" name="yposanchor" onchange="positionChanged();">
                            <option value="top">Top edge</option>
                            <option value="bottom" selected>Bottom edge</option>
                        </select>
                        <input type="number" id="ypospc" oninput="positionChanged();" />% from top of window
                    </div>
                    <div class="menurow">
                        Final scale factor
                        <input type="number" id="scalefactor" oninput="positionChanged();" />%
                    </div>
                </div>
            </div>

            <div class="menusection">
                <div class="sectiontitle sectiontitleclickable" onclick="toggleOptionsSection('format');">
                    <div class="sectiondropdown" id="formatdropdown">&#x25B6;</div>
                    Format &amp; display
                </div>
                <div class="sectionbody" id="formatsection">
                    <div class="menurow">
                        <label for="clockdesign">Design</label>
                        <select name="clockdesign" id="clockdesign" onchange="clockDesignChanged();">
                            <option value="octagon" selected>Octagon</option>
                            <option value="nixie">Nixie tubes</option>
                            <option value="teletext">Teletext</option>
                            <option value="boring">Boring</option>
                        </select>
                    </div>
                    <div class="menurow fontcontrol" style="margin-top: 5px; margin-bottom: 5px;">
                        <label for="typeface">Typeface</label>
                        <select name="typeface" id="typeface" onchange="appearanceChanged();">
                            <option value="Bebas Neue" style="font-family: Bebas Neue;">Bebas Neue</option>
                            <option value="Boogaloo" style="font-family: Boogaloo;">Boogaloo</option>
                            <option value="Inter" style="font-family: Inter;" selected>Inter</option>
                            <option value="Nova Mono" style="font-family: Nova Mono;">Nova Mono</option>
                            <option value="'Press Start 2P'" style="font-family: 'Press Start 2P';">Press Start 2P</option>
                            <option value="Questrial" style="font-family: Questrial;">Questrial</option>
                        </select>
                    </div>
                    <div class="menurow">
                        <input type="checkbox" id="displayclock" name="displayclock" onclick="optionsChanged();" checked /><label for="displayclock">Display on</label>
                    </div>
                    <div class="menurow">
                        <input type="checkbox" id="showborder" name="showborder" onclick="appearanceChanged();" checked /><label for="showborder">Show border</label>
                    </div>
                    <div class="menurow">
                        <input type="checkbox" id="leadingzero" name="leadingzero" onclick="optionsChanged();" /><label for="leadingzero">Leading zero</label>
                    </div>
                    <div class="menurow rtcmodecontrols">
                        <input type="checkbox" id="showrtcseconds" name="showrtcseconds" onclick="optionsChanged();" /><label for="showrtcseconds">Show seconds</label>
                    </div>
                    <div class="menurow clockmodecontrols rtcmodecontrols">
                        <input type="checkbox" id="showtenths" name="showtenths" onclick="optionsChanged();" /><label for="showtenths">Show tenths</label>
                    </div>
                    <div class="menurow doubleheightcontrol">
                        <input type="checkbox" id="doubleheight" name="doubleheight" onclick="appearanceChanged();" checked /><label for="doubleheight">Double height characters</label>
                    </div>
                    <div class="menurow clockmodecontrols">
                        <input type="checkbox" id="allowhours" name="allowhours" onclick="optionsChanged();" checked /><label for="allowhours">Allow hours field</label>
                    </div>
                    <div class="menurow clockmodecontrols">
                        <label for="format">Display format</label>
                        <select name="format" id="format" onchange="optionsChanged();">
                            <option value="-1" selected>Automatic from start time</option>
                            <option value="-2">Automatic from current time</option>
                            <option value="1">s</option>
                            <option value="2">ss</option>
                            <option value="3">m:ss</option>
                            <option value="4">mm:ss</option>
                            <option value="5">h:mm:ss</option>
                            <option value="6">hh:mm:ss</option>
                        </select>
                    </div>
                    <div class="menurow countermodecontrols">
                        <label for="counterwidth">Pad to </label><input type="number" id="counterwidth" name="counterwidth" min="0" max="10" onclick="optionsChanged();" /><label for="counterwidth"> characters</label>
                    </div>
                </div>
            </div>

            <div class="menusection">
                <div class="sectiontitle sectiontitleclickable" onclick="toggleOptionsSection('colourtrim');">
                    <div class="sectiondropdown" id="colourtrimdropdown">&#x25B6;</div>
                    Colour &amp; trim
                </div>
                <div class="sectionbody sectionbodycolourtrim" id="colourtrimsection">
                    <div class="colourtable">
                        <div class="colourcontrol">
                            <div class="colourcontroltitle">Page<br>background</div>
                            <div class="colourpicker">
                                <input type="color" name="bgcolor" id="bgcolor" onchange="appearanceChanged();" value="#00b140" />
                            </div>
                        </div>
                        <div class="colourcontrol bordercolourcontrol">
                            <div class="colourcontroltitle">Clock<br>background</div>
                            <div class="colourpicker">
                                <input type="color" name="clockbgcolor" id="clockbgcolor" onchange="appearanceChanged();" value="#000000" />
                            </div>
                        </div>
                        <div class="colourcontrol textcolourcontrol">
                            <div class="colourcontroltitle">Character</div>
                            <div class="colourpicker">
                                <input type="color" name="fgcolor" id="fgcolor" onchange="appearanceChanged();" value="#ffffff" />
                            </div>
                        </div>
                        <div class="colourcontrol textoutlinecontrol">
                            <div class="colourcontroltitle">Outline</div>
                            <div class="colourpicker">
                                <input type="color" name="outlinecolor" id="outlinecolor" onchange="appearanceChanged();" value="#000000" />
                            </div>
                        </div>
                    </div>
                    <table class="colourtrim">
                        <tr class="textoutlinecontrol">
                            <td><label for="outlinesize">Outline size</label></td>
                            <td><input type="number" name="outlinesize" id="outlinesize" oninput="appearanceChanged();" value="1" min="0" max="20" /></td>
                        </tr>
                        <tr class="textshadowcontrol">
                            <td><label for="shadowlength">Shadow length</label></td>
                            <td>
                                <input type="number" name="shadowlength" id="shadowlength" value="3" oninput="appearanceChanged();" min="0" max="50" /><label for="shadowdir">direction</label>
                                <select name="shadowdir" id="shadowdir" onchange="appearanceChanged();">
                                    <option value="0">&#x2B06; N</option>
                                    <option value="1">&#x2B08; NE</option>
                                    <option value="2">&#x27A1; E</option>
                                    <option value="3" selected>&#x2B0A; SE</option>
                                    <option value="4">&#x2B07; S</option>
                                    <option value="5">&#x2B0B; SW</option>
                                    <option value="6">&#x2B05; W</option>
                                    <option value="7">&#x2B09; NW</option>
                                </select>
                            </td>
                        </tr>
                        <tr class="bordercolourcontrol">
                            <td><label for="clockbgalpha">Clock BG opacity</label></td>
                            <td>
                                <input type="number" id="clockbgalpha" name="clockbgalpha" min="0" max="100" value="70" oninput="appearanceChanged();" />%
                            </td>
                        </tr>
                    </table>
                    <div class="menurow">
                        <input type="checkbox" name="bgdisable" id="bgdisable" onclick="appearanceChanged();" /><label for="bgdisable">Disable page background colour</label>
                    </div>
                </div>
            </div>
            <div class="menusection">
                <div class="sectiontitle sectiontitleclickable" onclick="toggleOptionsSection('export');">
                    <div class="sectiondropdown" id="exportdropdown">&#x25B6;</div>
                    Export settings as URL
                </div>
                <div class="sectionbody" id="exportsection">
                    <div class="menurow">
                        <div class="menurow">
                        <input type="checkbox" id="exportmenuon" name="exportmenuon" onclick="exportSettingsAsURL();" checked /><label for="exportmenuon">Show menu</label>
                        </div>
                        <div class="menurow">
                        <input type="checkbox" id="exportstart" name="exportstart" onclick="exportSettingsAsURL();" /><label for="exportstart">Start clock automatically</label>
                        </div>
                        <div class="menurow">
                        <button id="copyexporturl" onclick="exportSettingsAsURLAndCopy();">Export and copy to clipboard</button>
                        </div>
                        <div class="menurow">
                        <input type="text" id="exporturl" name="exporturl" style="background-color: #eeeeee;" readonly />
                        </div>
                    </div>
                </div>
            </div>
            <div class="menusection">
                <div class="sectiontitle sectiontitleclickable" onclick="toggleOptionsSection('save');">
                    <div class="sectiondropdown" id="savedropdown">&#x25B6;</div>
                    Save/restore settings
                </div>
                <div class="sectionbody" id="savesection">
                    <div class="menurow">
                        <p id="cookiesummary">
                        Note: this uses cookies. <a onclick="showCookieDetails();" class="expandlink">[more info]</a>
                        </p>
                        <p id="cookiedetails" style="display: none;">
                        This feature uses cookies.
                        By using the "Save settings" button you consent to
                        the above settings being saved in your browser as a
                        cookie. This page does not use cookies for any other
                        purpose. In particular, nothing on this page uses
                        cookies for any advertising or tracking purposes.
                        <a onclick="hideCookieDetails();" class="expandlink">[hide]</a>
                        </p>
                        <button class="settingsbutton" id="savesettings" onclick="saveSettings();">&#x1F4BE; Save settings</button>
                    </div>
                    <div class="menurow">
                        <button class="settingsbutton" id="restoresettings" onclick="restoreSettings();">&#x1F4C2; Restore saved settings</button>
                    </div>
                    <div class="menurow" style="margin-top: 15px;">
                        <button class="settingsbutton" id="resetsettings" onclick="resetSettingsToDefaults();">&#x1F5D1; Reset to defaults</button>
                    </div>
                </div>
            </div>

            <div class="menusection about">
                <div class="sectiontitle sectiontitleclickable" onclick="toggleOptionsSection('about');">
                    <div class="sectiondropdown" id="aboutdropdown">&#x25B6;</div>
                    About
                </div>
                <div class="sectionbody" id="aboutsection">
                <p>
                This project started as a mockup of the octagonal-bordered
                on-screen countdown clock used by various BBC shows in the
                1990s, prompted by
                <a href="https://www.youtube.com/watch?v=g80rnhK-cKo#t=16m32s" target="_blank">this video about the BBC Micro with Tom Scott and the Centre for Computing History</a>.
                The font for the numbers was reverse-engineered from
                screenshots of old shows, probably not quite accurately.
                The page has since grown some additional features and clock
                designs.
                </p>
                <p>
                The typefaces provided in the drop-down list with for the
                "Boring" design under "Format &amp; Display" are selected
                from the <a href="https://fonts.google.com/" target="_blank">Google Fonts</a>
                library and all have or support fixed-width digits.
                </p>
                <p>
                Octagon Simulator's
                <a href="https://github.com/elocemearg/octagon-simulator" target="_blank">source code is on GitHub</a>.
                </p>
                </div>
            </div>
        </div>
    </body>
</html>
